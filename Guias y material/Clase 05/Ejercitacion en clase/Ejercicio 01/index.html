<!--Aplicación Nº 1 (Generar un Json)
Crear un Json que represente información acerca de un producto (codigoBarra, nombre,
precio). Diseñarlo en el <script type=”text/javascript”>.
Validar su buen diseño ingresando en “http://jsonviewer.stack.hu/” .
Una vez validado el Json, mostrar todos sus atributos en un alert() y en el console.log()-->
<!DOCTYPE html>
<html lang="es">
<head>
    <script type="text/javascript">
        let json = { "codigoBarra" : "abc123" , "nombre" : "tomate" , "precio" : 50 };
        let objStr = JSON.stringify(json);
        /*
        alert("Objeto como viene:");
        alert(json);
        console.log(json);
        alert("String del objeto:");
        console.log(objStr);
        alert(objStr);
        alert("Atributos del objeto (Notacion objeto):");
        console.log(json.codigoBarra + " - " + json.nombre + " - " + json.precio);
        alert(json.codigoBarra + " - " + json.nombre + " - " + json.precio);
        alert("Atributos del objeto (Notacion array):");
        console.log(json["codigoBarra"] + " - " + json["nombre"] + " - " + json["precio"]);
        alert(json["codigoBarra"] + " - " + json["nombre"] + " - " + json["precio"]);*/
        //Envio al servidor
        alert("Objeto original:  " + json.codigoBarra + " - " + json.nombre + " - " + json.precio);
        console.log(objStr);
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = () => {
            if( xhttp.readyState == 4 && xhttp.status == 200 ) {
                json = JSON.parse(xhttp.response);
                alert("Objeto modificado:  " + json.codigoBarra + " - " + json.nombre + " - " + json.precio);
            }
        }
        xhttp.open("GET", `./json_test.php?producto=${objStr}`,true);
        xhttp.send();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Json</title>
</head>
<body>
    
</body>
</html>